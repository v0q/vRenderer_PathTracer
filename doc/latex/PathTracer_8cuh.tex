\hypertarget{PathTracer_8cuh}{\section{cuda/include/\-Path\-Tracer.cuh File Reference}
\label{PathTracer_8cuh}\index{cuda/include/\-Path\-Tracer.\-cuh@{cuda/include/\-Path\-Tracer.\-cuh}}
}


C\-P\-U-\/\-G\-P\-U header file for the path tracer.  


\subsection*{Classes}
\begin{DoxyCompactItemize}
\item 
struct \hyperlink{structvHitData}{v\-Hit\-Data}
\begin{DoxyCompactList}\small\item\em \hyperlink{structvHitData}{v\-Hit\-Data} Simple structure to contain the details of a ray intersection \end{DoxyCompactList}\item 
struct \hyperlink{structvCamera}{v\-Camera}
\begin{DoxyCompactList}\small\item\em \hyperlink{structvCamera}{v\-Camera} Simple structure to hold the camera on the G\-P\-U \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\hypertarget{PathTracer_8cuh_ab0980ebae247252f2beee460a03cf862}{typedef struct \hyperlink{structvHitData}{v\-Hit\-Data} \hyperlink{PathTracer_8cuh_ab0980ebae247252f2beee460a03cf862}{v\-Hit\-Data}}\label{PathTracer_8cuh_ab0980ebae247252f2beee460a03cf862}

\begin{DoxyCompactList}\small\item\em \hyperlink{structvHitData}{v\-Hit\-Data} Simple structure to contain the details of a ray intersection \end{DoxyCompactList}\item 
\hypertarget{PathTracer_8cuh_adbedd15ec953599468bbe7ae8bf171d6}{typedef struct \hyperlink{structvCamera}{v\-Camera} \hyperlink{PathTracer_8cuh_adbedd15ec953599468bbe7ae8bf171d6}{v\-Camera}}\label{PathTracer_8cuh_adbedd15ec953599468bbe7ae8bf171d6}

\begin{DoxyCompactList}\small\item\em \hyperlink{structvCamera}{v\-Camera} Simple structure to hold the camera on the G\-P\-U \end{DoxyCompactList}\item 
\hypertarget{PathTracer_8cuh_a93828196c8c7f7356a7a2e029724a122}{typedef enum v\-Texture\-Type {\bfseries v\-Texture\-Type}}\label{PathTracer_8cuh_a93828196c8c7f7356a7a2e029724a122}

\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum {\bfseries v\-Texture\-Type} \{ \\*
{\bfseries D\-I\-F\-F\-U\-S\-E}, 
{\bfseries N\-O\-R\-M\-A\-L}, 
{\bfseries S\-P\-E\-C\-U\-L\-A\-R}, 
{\bfseries D\-I\-F\-F\-U\-S\-E}, 
\\*
{\bfseries N\-O\-R\-M\-A\-L}, 
{\bfseries S\-P\-E\-C\-U\-L\-A\-R}, 
{\bfseries D\-I\-F\-F\-U\-S\-E}, 
{\bfseries N\-O\-R\-M\-A\-L}, 
\\*
{\bfseries S\-P\-E\-C\-U\-L\-A\-R}
 \}
\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{PathTracer_8cuh_ac928700f7e1284e9c48b3e9972057216}{cu\-\_\-run\-Render\-Kernel} (cuda\-Surface\-Object\-\_\-t o\-\_\-texture, cuda\-Surface\-Object\-\_\-t o\-\_\-depth, float4 $\ast$\-\_\-hdr, float4 $\ast$\-\_\-vertices, float4 $\ast$\-\_\-normals, float4 $\ast$\-\_\-tangents, float4 $\ast$\-\_\-bvh\-Data, float2 $\ast$\-\_\-uvs, float4 $\ast$io\-\_\-color\-Arr, \hyperlink{structvCamera}{v\-Camera} \-\_\-cam, unsigned int \-\_\-w, unsigned int \-\_\-h, unsigned int \-\_\-frame, unsigned int \-\_\-time, float \-\_\-fresnel\-Coef, float \-\_\-fresnel\-Pow)
\begin{DoxyCompactList}\small\item\em cu\-\_\-run\-Render\-Kernel C\-P\-U function that calls the G\-P\-U kernel \end{DoxyCompactList}\item 
void \hyperlink{PathTracer_8cuh_a3c5a077c055656ec04072e241cb8abd9}{cu\-\_\-bind\-Texture} (const float4 $\ast$\-\_\-device\-Texture, const unsigned int \-\_\-w, const unsigned int \-\_\-h, const v\-Texture\-Type \&\-\_\-type)
\begin{DoxyCompactList}\small\item\em cu\-\_\-bind\-Texture Binds a given buffer to a cuda texture \end{DoxyCompactList}\item 
void \hyperlink{PathTracer_8cuh_a96b4e745cacc70a0e1007d7df5176864}{cu\-\_\-bind\-B\-R\-D\-F} (const float $\ast$\-\_\-brdf)
\begin{DoxyCompactList}\small\item\em cu\-\_\-bind\-B\-R\-D\-F Binds the B\-R\-D\-F data to a cuda texture \end{DoxyCompactList}\item 
void \hyperlink{PathTracer_8cuh_adf3705d0e2ca2e89001457104fefd218}{cu\-\_\-use\-B\-R\-D\-F} (const bool \&\-\_\-new\-Val)
\begin{DoxyCompactList}\small\item\em cu\-\_\-use\-B\-R\-D\-F Toggles a device symbol for B\-R\-D\-F usage \end{DoxyCompactList}\item 
void \hyperlink{PathTracer_8cuh_a0ebc9aa3ce310c2cd3c99793c212aefa}{cu\-\_\-use\-Example\-Sphere} (const bool \&\-\_\-new\-Val)
\begin{DoxyCompactList}\small\item\em cu\-\_\-use\-Example\-Sphere Toggles a device symbol for example sphere usage \end{DoxyCompactList}\item 
void \hyperlink{PathTracer_8cuh_a84c7787fce87bcd3aecd756480fba258}{cu\-\_\-use\-Cornell\-Box} (const bool \&\-\_\-new\-Val)
\begin{DoxyCompactList}\small\item\em cu\-\_\-use\-Cornell\-Box Toggles a device symbol for whether to use the cornell box or H\-D\-R\-I \end{DoxyCompactList}\item 
void \hyperlink{PathTracer_8cuh_a57be5801cbad9c51e6ab73ea59a32c62}{cu\-\_\-set\-H\-D\-R\-Dim} (const unsigned int \&\-\_\-w, const unsigned int \&\-\_\-h)
\begin{DoxyCompactList}\small\item\em cu\-\_\-set\-H\-D\-R\-Dim Set the dimensions of the H\-D\-R\-I map, as it's stored in a float4 buffer rather than a texture \end{DoxyCompactList}\item 
\hypertarget{PathTracer_8cuh_aed211bb31208e488f637a15f9a68587e}{void \hyperlink{PathTracer_8cuh_aed211bb31208e488f637a15f9a68587e}{cu\-\_\-mesh\-Initialised} ()}\label{PathTracer_8cuh_aed211bb31208e488f637a15f9a68587e}

\begin{DoxyCompactList}\small\item\em cu\-\_\-mesh\-Initialised Propagate the info that a mesh has been initialised to the G\-P\-U \end{DoxyCompactList}\item 
void \hyperlink{PathTracer_8cuh_a7cfaf8db845b7c5c5af7361d54a10ca0}{cu\-\_\-fill\-Float4} (float4 $\ast$\-\_\-d\-Ptr, const float4 \-\_\-val, const unsigned int \-\_\-size)
\begin{DoxyCompactList}\small\item\em cu\-\_\-fill\-Float4 Fill a device float4 pointer with a given value \end{DoxyCompactList}\item 
\hypertarget{PathTracer_8cuh_a6a3d532cae6d73f9efe5bf195eb14d1e}{void \hyperlink{PathTracer_8cuh_a6a3d532cae6d73f9efe5bf195eb14d1e}{cu\-\_\-clean\-Up} ()}\label{PathTracer_8cuh_a6a3d532cae6d73f9efe5bf195eb14d1e}

\begin{DoxyCompactList}\small\item\em cu\-\_\-clean\-Up Cleans up the textures etc from the device \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
C\-P\-U-\/\-G\-P\-U header file for the path tracer. \begin{DoxyAuthor}{Authors}
Teemu Lindborg 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\-0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
04/05/17 Updated to N\-C\-C\-A Coding standard Revision History \-: Initial Version 08/12/16 
\end{DoxyDate}
\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]
\begin{DoxyItemize}
\item 
\end{DoxyItemize}\end{DoxyRefDesc}


\subsection{Function Documentation}
\hypertarget{PathTracer_8cuh_a96b4e745cacc70a0e1007d7df5176864}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-bind\-B\-R\-D\-F@{cu\-\_\-bind\-B\-R\-D\-F}}
\index{cu\-\_\-bind\-B\-R\-D\-F@{cu\-\_\-bind\-B\-R\-D\-F}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-bind\-B\-R\-D\-F}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-bind\-B\-R\-D\-F (
\begin{DoxyParamCaption}
\item[{const float $\ast$}]{\-\_\-brdf}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_a96b4e745cacc70a0e1007d7df5176864}


cu\-\_\-bind\-B\-R\-D\-F Binds the B\-R\-D\-F data to a cuda texture 


\begin{DoxyParams}{Parameters}
{\em \-\_\-brdf} & Device brdf buffer \\
\hline
\end{DoxyParams}
\hypertarget{PathTracer_8cuh_a3c5a077c055656ec04072e241cb8abd9}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-bind\-Texture@{cu\-\_\-bind\-Texture}}
\index{cu\-\_\-bind\-Texture@{cu\-\_\-bind\-Texture}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-bind\-Texture}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-bind\-Texture (
\begin{DoxyParamCaption}
\item[{const float4 $\ast$}]{\-\_\-device\-Texture, }
\item[{const unsigned int}]{\-\_\-w, }
\item[{const unsigned int}]{\-\_\-h, }
\item[{const v\-Texture\-Type \&}]{\-\_\-type}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_a3c5a077c055656ec04072e241cb8abd9}


cu\-\_\-bind\-Texture Binds a given buffer to a cuda texture 


\begin{DoxyParams}{Parameters}
{\em \-\_\-device\-Texture} & Device texture buffer \\
\hline
{\em \-\_\-w} & Width of the texture \\
\hline
{\em \-\_\-h} & Height of the texture \\
\hline
{\em \-\_\-type} & Type of the texture, 0 = Diffuse, 1 = Normal, 2 = Specular \\
\hline
\end{DoxyParams}
\hypertarget{PathTracer_8cuh_a7cfaf8db845b7c5c5af7361d54a10ca0}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-fill\-Float4@{cu\-\_\-fill\-Float4}}
\index{cu\-\_\-fill\-Float4@{cu\-\_\-fill\-Float4}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-fill\-Float4}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-fill\-Float4 (
\begin{DoxyParamCaption}
\item[{float4 $\ast$}]{\-\_\-d\-Ptr, }
\item[{const float4}]{\-\_\-val, }
\item[{const unsigned int}]{\-\_\-size}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_a7cfaf8db845b7c5c5af7361d54a10ca0}


cu\-\_\-fill\-Float4 Fill a device float4 pointer with a given value 


\begin{DoxyParams}{Parameters}
{\em \-\_\-d\-Ptr} & Device pointer \\
\hline
{\em \-\_\-val} & Value to fill the pointer with \\
\hline
{\em \-\_\-size} & Size of the device pointer \\
\hline
\end{DoxyParams}
\hypertarget{PathTracer_8cuh_ac928700f7e1284e9c48b3e9972057216}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-run\-Render\-Kernel@{cu\-\_\-run\-Render\-Kernel}}
\index{cu\-\_\-run\-Render\-Kernel@{cu\-\_\-run\-Render\-Kernel}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-run\-Render\-Kernel}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-run\-Render\-Kernel (
\begin{DoxyParamCaption}
\item[{cuda\-Surface\-Object\-\_\-t}]{o\-\_\-texture, }
\item[{cuda\-Surface\-Object\-\_\-t}]{o\-\_\-depth, }
\item[{float4 $\ast$}]{\-\_\-hdr, }
\item[{float4 $\ast$}]{\-\_\-vertices, }
\item[{float4 $\ast$}]{\-\_\-normals, }
\item[{float4 $\ast$}]{\-\_\-tangents, }
\item[{float4 $\ast$}]{\-\_\-bvh\-Data, }
\item[{float2 $\ast$}]{\-\_\-uvs, }
\item[{float4 $\ast$}]{io\-\_\-color\-Arr, }
\item[{{\bf v\-Camera}}]{\-\_\-cam, }
\item[{unsigned int}]{\-\_\-w, }
\item[{unsigned int}]{\-\_\-h, }
\item[{unsigned int}]{\-\_\-frame, }
\item[{unsigned int}]{\-\_\-time, }
\item[{float}]{\-\_\-fresnel\-Coef, }
\item[{float}]{\-\_\-fresnel\-Pow}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_ac928700f7e1284e9c48b3e9972057216}


cu\-\_\-run\-Render\-Kernel C\-P\-U function that calls the G\-P\-U kernel 


\begin{DoxyParams}{Parameters}
{\em o\-\_\-texture} & G\-L texture to write the result to \\
\hline
{\em o\-\_\-depth} & G\-L depth texture to write the depth to \\
\hline
{\em \-\_\-hdr} & H\-D\-R\-I map \\
\hline
{\em \-\_\-vertices} & Mesh vertices \\
\hline
{\em \-\_\-normals} & Mesh normals \\
\hline
{\em \-\_\-tangents} & Mesh tangents \\
\hline
{\em \-\_\-bvh\-Data} & \hyperlink{classSBVH}{S\-B\-V\-H} acceleration structure \\
\hline
{\em \-\_\-uvs} & Mesh U\-Vs \\
\hline
{\em io\-\_\-color\-Arr} & Colour accumulation buffer \\
\hline
{\em \-\_\-cam} & \hyperlink{classCamera}{Camera} \\
\hline
{\em \-\_\-w} & Width of the screen/render area \\
\hline
{\em \-\_\-h} & Height of the screen/render area \\
\hline
{\em \-\_\-frame} & Current frame number \\
\hline
{\em \-\_\-time} & Elapsed time (used as a seed for rng) \\
\hline
{\em \-\_\-fresnel\-Coef} & Fresnel coefficient \\
\hline
{\em \-\_\-fresnel\-Pow} & Fresnel power \\
\hline
\end{DoxyParams}
\hypertarget{PathTracer_8cuh_a57be5801cbad9c51e6ab73ea59a32c62}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-set\-H\-D\-R\-Dim@{cu\-\_\-set\-H\-D\-R\-Dim}}
\index{cu\-\_\-set\-H\-D\-R\-Dim@{cu\-\_\-set\-H\-D\-R\-Dim}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-set\-H\-D\-R\-Dim}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-set\-H\-D\-R\-Dim (
\begin{DoxyParamCaption}
\item[{const unsigned int \&}]{\-\_\-w, }
\item[{const unsigned int \&}]{\-\_\-h}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_a57be5801cbad9c51e6ab73ea59a32c62}


cu\-\_\-set\-H\-D\-R\-Dim Set the dimensions of the H\-D\-R\-I map, as it's stored in a float4 buffer rather than a texture 


\begin{DoxyParams}{Parameters}
{\em \-\_\-w} & Width of the H\-D\-R\-I map \\
\hline
{\em \-\_\-h} & Height of the H\-D\-R\-I map \\
\hline
\end{DoxyParams}
\hypertarget{PathTracer_8cuh_adf3705d0e2ca2e89001457104fefd218}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-use\-B\-R\-D\-F@{cu\-\_\-use\-B\-R\-D\-F}}
\index{cu\-\_\-use\-B\-R\-D\-F@{cu\-\_\-use\-B\-R\-D\-F}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-use\-B\-R\-D\-F}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-use\-B\-R\-D\-F (
\begin{DoxyParamCaption}
\item[{const bool \&}]{\-\_\-new\-Val}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_adf3705d0e2ca2e89001457104fefd218}


cu\-\_\-use\-B\-R\-D\-F Toggles a device symbol for B\-R\-D\-F usage 


\begin{DoxyParams}{Parameters}
{\em \-\_\-new\-Val} & New value, whether to use B\-R\-D\-F or not \\
\hline
\end{DoxyParams}
\hypertarget{PathTracer_8cuh_a84c7787fce87bcd3aecd756480fba258}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-use\-Cornell\-Box@{cu\-\_\-use\-Cornell\-Box}}
\index{cu\-\_\-use\-Cornell\-Box@{cu\-\_\-use\-Cornell\-Box}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-use\-Cornell\-Box}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-use\-Cornell\-Box (
\begin{DoxyParamCaption}
\item[{const bool \&}]{\-\_\-new\-Val}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_a84c7787fce87bcd3aecd756480fba258}


cu\-\_\-use\-Cornell\-Box Toggles a device symbol for whether to use the cornell box or H\-D\-R\-I 


\begin{DoxyParams}{Parameters}
{\em \-\_\-new\-Val} & New value, whether to use cornell box or not \\
\hline
\end{DoxyParams}
\hypertarget{PathTracer_8cuh_a0ebc9aa3ce310c2cd3c99793c212aefa}{\index{Path\-Tracer.\-cuh@{Path\-Tracer.\-cuh}!cu\-\_\-use\-Example\-Sphere@{cu\-\_\-use\-Example\-Sphere}}
\index{cu\-\_\-use\-Example\-Sphere@{cu\-\_\-use\-Example\-Sphere}!PathTracer.cuh@{Path\-Tracer.\-cuh}}
\subsubsection[{cu\-\_\-use\-Example\-Sphere}]{\setlength{\rightskip}{0pt plus 5cm}void cu\-\_\-use\-Example\-Sphere (
\begin{DoxyParamCaption}
\item[{const bool \&}]{\-\_\-new\-Val}
\end{DoxyParamCaption}
)}}\label{PathTracer_8cuh_a0ebc9aa3ce310c2cd3c99793c212aefa}


cu\-\_\-use\-Example\-Sphere Toggles a device symbol for example sphere usage 


\begin{DoxyParams}{Parameters}
{\em \-\_\-new\-Val} & New value, whether to use the example sphere or not \\
\hline
\end{DoxyParams}
